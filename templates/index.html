{% extends 'layout.html' %}

{% block body %}
<!-- banner -->
<style>
    /* Style for the textarea */
    textarea {
        width: 100%;
        padding: 10px;
        border: 2px solid black; /* Border color */
        border-radius: 5px; /* Border radius */
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1); /* Box shadow */
        resize: vertical;
        text-align: center;
        font-size: 20px;
        font-weight: bold;
        font-weight: 700;
        vertical-align: center;
        color: black; /* Allow vertical resizing */
    }

    /* Optional: Add some padding to the form for better spacing */
    #queryForm {
        padding: 20px;
    }
    .centered-div {
        margin: 0 auto;
        width: 50%; /* You can adjust this width according to your needs */
        text-align: center; /* This centers inline content */
    }
    .btn{
      width: 100px;
      padding: 10px;
      border: 2px solid black; /* Border color */
      border-radius: 5px; /* Border radius */
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1); /* Box shadow */
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      font-weight: 700;
      background-color: white;
    }
</style>
<section class="banner_w3lspvt" id="home">
    <div class="csslider infinity" id="slider1">
    
                <div class="banner-top">
                    <div class="overlay">
                        <div class="container">
                            <div class="w3layouts-banner-info text-center">
                                <h3 class="text-wh">Cultivator</h3>
                                <h4 class="text-wh mx-auto my-4"><b>Get informed decisions about your farming strategy.</b></h4>
                                <br>
                                <h4 class="text-wh mx-auto my-4"><strong> Here are some questions we'll answer</strong></h4>
                                <p class="text-li mx-auto mt-2">
                                    1. What crop to plant here? <br>
                                    2. What fertilizer to use? <br>
                                    3. Which disease do your crop have?<br>
                                    4. How to cure the disease?</p>
                                <form id="queryForm">
                                    <h4 for="query" class="text-wh mx-auto my-4"><strong>Have a question? Ask here:</strong></h4><br>
                                    <textarea id="query" class="text-li mx-auto my-4" name="query" rows="3" cols="50" required></textarea><br>
                                    <button class="btn text-wh mx-auto my-4" type="submit" style="border-radius: 15px; padding: 10px;">Submit</button>
                                </form>
				<h5 id="result" class="centered-content text-li mx-auto my-4"></h5>
                            </div>
                        </div>
                    </div>
                </div>
    </div>
</section>
<!-- //banner -->

<!-- core values -->
<section class="core-value py-5">
    <div class="container py-md-4">
        <h3 class="heading mb-sm-5 mb-4 text-center"> About Us</h3>
        <div class="row core-grids">
            <div class="col-lg-6 core-left">
                <img src="{{ url_for('static', filename='images/core.jpg') }}" class="img-fluid" alt="" />
            </div>
            <div class="col-lg-6 core-right">
                <h3 class="mt-4">Improving Agriculture, Improving Lives, Cultivating Crops To Make Farmers Increase
                    Profit.</h3>
                <p class="mt-3">We use state-of-the-art machine learning and deep learning technologies to help you
                    guide through
                    the entire farming process. Make informed decisions to understand the demographics of your area,
                    understand the
                    factors that affect your crop and keep them healthy for a super awesome successful yield.</p>
            </div>
        </div>
    </div>
</section>
<!-- //core values -->

<!-- Products & Services -->
<section class="blog py-5">
    <div class="container py-md-5">
        <h3 class="heading mb-sm-5 mb-4 text-center"> Our Services</h3>
        <div class="row blog-grids">
            <div class="col-lg-4 col-md-6 blog-left mb-lg-0 mb-sm-5 pb-lg-0 pb-5">
                <img src="{{ url_for('static', filename='images/s3.jpg') }}" class="img-fluid" alt="" />
                <a href="{{ url_for('crop_recommend') }}">
                    <div class="blog-info">

                        <h4>Crop</h4>

                        <p class="mt-2"> Recommendation about the type of crops to be cultivated which is best suited
                            for the respective conditions</p>
                    </div>
                </a>
            </div>
            <div class="col-lg-4 col-md-6 blog-middle mb-lg-0 mb-sm-5 pb-lg-0 pb-md-5">
                <img src="{{ url_for('static', filename='images/s2.jpg') }}" class="img-fluid" alt="" />
                <a href="{{ url_for('fertilizer_recommendation') }}">
                    <div class="blog-info">
                        <h4>Fertilizer</h4>
                        <p class="mt-2">Recommendation about the type of fertilizer best suited for the particular soil
                            and the recommended crop</p>
                    </div>
                </a>
            </div>
            <div class="col-lg-4 col-md-6 blog-right mt-lg-0 mt-5 pt-lg-0 pt-md-5">

                <img src="{{ url_for('static', filename='images/s4.jpg') }}" class="img-fluid" alt="">

                <!-- <img src="images/s4.jpg" class="img-fliud" alt="" /> -->
                <a href="{{ url_for('disease_prediction') }}">
                    <div class="blog-info">
                        <h4>Crop Disease</h4>
                        <p class="mt-2">Predicting the name and causes of crop disease and suggestions to cure it</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>
<!-- //Products & Services -->

<!-- Creating custom grid and hover effect
<section>
<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
    <div class="hovereffect">
        <img class="img-responsive" src="images/s2.jpg" alt="">
        <div class="overlay">
           <h2>Hover effect 1</h2>
           <a class="info" href="#">link here</a>
        </div>
    </div>
</div> -->

</html>

<script>
    document.getElementById('queryForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const query = document.getElementById('query').value;
    const response = await fetch('/query', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ query })
    });
    const data = await response.json();
  
    // Format the response as an ordered list
    const formattedResponse = data.answer.split('\n')
        .filter(line => line.trim() !== '') // Remove empty lines
        .map((line, index) => `<p class="text-li mx-auto my-4">${line}</p>`)
        .join('');
    
    // Display the formatted response in the centered content div
    document.getElementById('result').innerHTML = `<ol class="text-li mx-auto my-4">${formattedResponse}</ol>`;
});

</script>

{% endblock %}
